<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>احترف الكتابة على الكيبورد - Typing Master</title>
    
    <!-- Google Analytics Code -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9H752QQ210"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-9H752QQ210');
    </script>
    <!-- End Google Analytics Code -->
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* باقي كود CSS كما هو */
    </style>
</head>
<body>
    <!-- باقي كود HTML كما هو -->

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // كود JavaScript الأصلي كما هو
        
        // إضافة أحداث تتبع لجوجل أناليتكس
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', function() {
                gtag('event', 'navigation', {
                    'event_category': 'engagement',
                    'event_label': this.textContent
                });
            });
        });
        
        document.querySelector('.hero .btn').addEventListener('click', function() {
            gtag('event', 'click', {
                'event_category': 'engagement',
                'event_label': 'Hero CTA Button'
            });
        });
        
        document.querySelectorAll('.lesson-card .btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const lessonTitle = this.closest('.lesson-card').querySelector('h3').textContent;
                gtag('event', 'click', {
                    'event_category': 'lessons',
                    'event_label': lessonTitle
                });
            });
        });
        
        // تتبع أحداث الكتابة
        typingInput.addEventListener('focus', function() {
            gtag('event', 'typing_start', {
                'event_category': 'engagement',
                'event_label': 'Typing Test Started'
            });
        });
        
        restartBtn.addEventListener('click', function() {
            gtag('event', 'typing_restart', {
                'event_category': 'engagement',
                'event_label': 'Typing Test Restarted'
            });
        });
        
        // تتبع إكمال اختبار الكتابة
        function calculateResults() {
            // الكود الأصلي...
            
            // إرسال حدث إكمال الاختبار إلى جوجل أناليتكس
            gtag('event', 'typing_complete', {
                'event_category': 'engagement',
                'event_label': 'Typing Test Completed',
                'value': wpm, // سرعة الكتابة بالكلمات في الدقيقة
                'accuracy': accuracy // الدقة كنسبة مئوية
            });
        }
    </script>
</body>
</html>